#include "stdafx.h"
#include "FontRenderer.h"

#include "utils.h"

void FontRenderer::DrawString(std::string str, float x, float y, float percent, int colour, float scale) {
    for (char c : str) {
        DrawChar(c, x, y, percent, colour, scale);
        x += 12 * scale;
    }
}

void FontRenderer::DrawChar(char c, float x, float y, float percent, int colour, float scale) {
    auto lines = charMap[c];
    for (auto line : lines) {
        Utils::DrawAnimLine(
            x + (line.x1 * scale), y + (line.y1 * scale), x + (line.x2 * scale), y + (line.y2 * scale),
            colour, percent);
    }
}

float FontRenderer::GetStringWidth(std::string* str, float scale) {
    return static_cast<float>(str->length()) * 12 * scale - 2;
}


// this is so cursed
std::map<char, std::vector<CharLine>> FontRenderer::charMap = {
    {
        'A',{
            {0, 0, 5, 10},
            {5, 10, 10, 0},
            {2.5f, 5, 7.5f, 5},
        }
    },
    {
        'B',{
            {0, 0, 0, 10},
            {0, 0, 10, 0},
            {10, 5, 10, 0},
            {10, 5, 0, 5},
            {7, 5, 7, 10},
            {0, 10, 7, 10},
        }
    },
    {
        'C',{
            {0, 0, 0, 10},
            {0, 0, 10, 0},
            {0, 10, 10, 10},
        }
    },
    {
        'D',{
            {0, 0, 0, 10},
            {0, 10, 7.5, 10},
            {7.5f, 10, 10, 7.5f},
            {10, 7.5f, 10, 2.5f},
            {10, 2.5f, 7.5f, 0},
            {7.5f, 0, 0, 0},
            
        }
    },
    {
        'E',{
            {0, 0, 0, 10},
            {0, 0, 10, 0},
            {0, 5, 5, 5},
            {0, 10, 10, 10},
        }
    },
    {
        'F',{
            {0, 0, 0, 10},
            {0, 5, 5, 5},
            {0, 10, 10, 10}
        }
    },
    {
        'G',{
            {10, 10, 0, 10},
            {0, 10, 0, 0},
            {0, 0, 10, 0},
            {10, 0, 10, 5},
            {10, 5, 5, 5},
        }
    },
    {
        'H',{
            {0, 0, 0, 10},
            {10, 0, 10, 10},
            {0, 5, 10, 5}
        }
    },
    {
        'I',{
            {0, 10, 10, 10},
            {5, 10, 5, 0},
            {0, 0, 10, 0}
        }
    },
    {
        'J',{
            {0, 10, 10, 10},
            {7, 10, 7, 3},
            {7, 3, 5, 0},
            {5, 0, 2, 0}
        }
    },
    {
        'K',{
            {0, 0, 0, 10},
            {0, 5, 10, 10},
            {0, 5, 10, 0}
        }
    },
    {
        'L',{
            {0, 10, 0, 0},
            {0, 0, 10, 0}
        }
    },
    {
        'M',{
            {0, 0, 0, 10},
            {0, 10, 5, 5},
            {5, 5, 10, 10},
            {10, 10, 10, 0}
        }
    },
    {
        'N',{
            {0, 0, 0, 10},
            {0, 10, 10, 0},
            {10, 0, 10, 10}
        }
    },
    {
        'O',{
            {0, 0, 10, 0},
            {10, 0, 10, 10},
            {10, 10, 0, 10},
            {0, 10, 0, 0},
        }
    },
    {
        'P',{
            {0, 0, 0, 10},
            {0, 10, 10, 10},
            {10, 10, 10, 5},
            {10, 5, 0, 5}
        }
    },
    {
        'Q',{
            {0, 2, 0, 10},
            {0, 2, 8, 2},
            {0, 10, 8, 10},
            {8, 10, 8, 2},
            {7, 3, 10, 0}
        }
    },
    {
        'R',{
            {0, 0, 0, 10},
            {0, 10, 10, 10}
        }
    },
    {
        'S',{
            {10, 10, 0, 10},
            {0, 10, 0, 5},
            {0, 5, 10, 5},
            {10, 5, 10, 0},
            {10, 0, 0, 0}
        }
    },
    {
        'T',{
            {0, 10, 10, 10},
            {5, 10, 5, 0}
        }
    },
    {
        'U',{
            {0, 10, 0, 0},
            {0, 0, 10, 0},
            {10, 0, 10, 10}
        }
    },
    {
        'V',{
            {0, 10, 5, 0},
            {5, 0, 10, 10}
        }
    },
    {
        'W',{
            {0, 10, 2.5f, 0},
            {2.5f, 0, 5, 5},
            {5, 5, 7.5f, 0},
            {7.5f, 0, 10, 10},
        }
    },
    {
        'X',{
            {0, 0, 10, 10},
            {0, 10, 10, 0}
        }
    },
    {
        'Y', {
            {0, 10, 5, 6.5f},
            {10, 10, 5, 6.5f},
            {5, 6.5f, 5, 0}
        },
    },
    {
        'Z', {
            {0, 10, 10, 10},
            {10, 10, 0, 0},
            {0, 0, 10, 0}
        }
    },
    {
        ' ', {}
    },
    {
        '1', {
            {0, 0, 10, 0},
            {5, 0, 5, 10},
            {5, 10, 2, 7}
        },
    },
    {
        '2', {
            {0, 10, 10, 10},
            {10, 10, 10, 7},
            {10, 7, 0, 0},
            {0, 0, 10, 0}
        }
    },
    {
        '3', {
            {0, 10, 10, 10},
            {10, 10, 10, 0},
            {0, 0, 10, 0},
            {5, 5, 10, 5}
        }
    },
    {
        '4', {
            {0, 10, 0, 6},
            {0, 6, 10, 6},
            {8, 10, 8, 0}
        }
    },
    {
        '5', {
            {10, 10, 0, 10},
            {0, 10, 0, 5},
            {0, 5, 10, 5},
            {10, 5, 10, 0},
            {10, 0, 0, 0}
        }
    },
    {
        '6', {
            {10, 10, 0, 10},
            {0, 10, 0, 0},
            {0, 0, 10, 0},
            {10, 0, 10, 5},
            {10, 5, 0, 5}
        }
    },
    {
        '7', {
            {3, 0, 10, 10},
            {10, 10, 0, 10},
        }
    },
    {
        '8', {
            {0, 0, 0, 10},
            {0, 0, 10, 0},
            {10, 0, 10, 10},
            {10, 10, 0, 10},
            {0, 5, 10, 5}
        },
    },
    {
        '9', {
            {0, 0, 10, 0},
            {10, 0, 10, 10},
            {10, 10, 0, 10},
            {0, 10, 0, 5},
            {0, 5, 10, 5}
        }
    },
    {
        '0', {
            {0, 0, 0, 10},
            {0, 0, 10, 0},
            {10, 0, 10, 10},
            {10, 10, 0, 10},
            {0, 0, 10, 10}
        }
    }
};